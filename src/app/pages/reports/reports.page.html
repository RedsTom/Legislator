<p-header>
  <h1>Rapports</h1>
</p-header>

<div id="content">
  @let reports = reports$ | async;
  @defer (when reports) {
    @for (reportGroup of (reports ?? [] | groupBy: groupByDate).entries(); track reportGroup[0]) {
      <h2>{{ reportGroup[0] }}</h2>
      @for (report of reportGroup[1]; track report.pageLink) {
        <p-card
          [header]="report.title"
          [styleClass]="'card'"
          [style]="{ width: '100%' }"
        >
          @for (order of report.orders; track order) {
            <p>{{ order }}</p>
          }
          <p-button
            label="Voir le rapport"
            icon="pi pi-arrow-right"
            iconPos="right"
            [routerLink]="report.pageLink"
            styleClass="p-button-outlined"
          />
        </p-card>
      }
    }
  } @placeholder {
    <div id="loading">
      <p-progress-spinner/>
    </div>
  } @loading {
    <div id="loading">
      <p-progress-spinner/>
    </div>
  } @error {
    <p>Erreur</p>
  }

  @defer (when reports) {
  } @loading {
    <p>Chargement...</p>
  }
</div>
